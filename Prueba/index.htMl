<!DOCTYPE html>
<html>
    <head>
        <title>


        </title>
        <script src="js/jquery-current.min.js"></script>
        <script src="js/bootstrap/js/bootstrap.min.js"></script>
        <script src="js/d3/d3.min.js"></script>
        <script src="js/vega/vega.js"></script>
        <script src="personas.js"></script>
        <script src="piramide.js"></script>
        <script src="barras.js"></script>
        <script src="lineas.js"></script>
        <script src="Pie.js"></script>
        <script src="Mapa.js"></script>
        <script src="Columnas.js"></script>
        <script src="NMIRDIST.geojson"></script>
        <script src="world-110m.json"></script>

    </head>
    <body>
        <ul/>
        <div>
            <button type="button" id="pi" onclick="iniciarConsulta1()">Piramide</button>
            <button type="button" id="ba" onclick="iniciarConsulta2()">Barras</button>
            <button type="button" id="es" onclick="iniciarConsulta3()">Lineas</button>
            <button type="button" id="Pie" onclick="iniciarConsulta4()">Pie</button>
            <button type="button" id="map" onclick="iniciarConsulta5()">Mapa</button>
            <button type="button" id="colum" onclick="iniciarConsulta6()">Columnas</button>
        </div>

        <ul/>
        <div>
            <div id="Tabpopulation" align="left"></div>
        </div>
    </body>
</html>

<script type="text/javascript">

    var esquema="https://vega.github.io/schema/vega/v3.0.json";
    datosJSON={};

    function iniciarConsulta1(){
        $("#Tabpopulation").empty();
        $("#Tabpopulation").append("<div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        var view = new vega.View(vega.parse(generarPiramide()), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();
    }

    function iniciarConsulta2(){
        $("#Tabpopulation").empty();
        $("#Tabpopulation").append("<div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        var view = new vega.View(vega.parse(generarBarras()), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();
    }


    function iniciarConsulta3(){
        $("#Tabpopulation").empty();
        $("#Tabpopulation").append("<div><button type=\"button\" id=\"config\">Graficar</button><input type=\"text\" id=\"text_config\"/></div><div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        $("#config").click(function(){
        console.log($("#text_config").val());
        $("#Tabpopulation").append("<div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        var view = new vega.View(vega.parse(generarLineas($("#text_config").val())), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();

    });
    }
    function iniciarConsulta4(){
        $("#Tabpopulation").empty();
        $("#Tabpopulation").append("<div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        var view = new vega.View(vega.parse(generarPie()), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();
        $('select[name=Seleccion]').change(function(){
            arr=Datos($('select[name=Seleccion]').val());
        
        view.on(view.vega.parse(generarPie()));
        });

      /*
        view = new vega.View(vega.parse(generarPie()), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();
//             console.log($('select[name=Seleccion]').val());
        var hoverfollower = view.add( function() {
        console.log(d3.select("select[name=Seleccion]").text(JSON.stringify(view._signals.Seleccion.option)));
        d3.select("select[name=Seleccion]").text(JSON.stringify(view._signals.Seleccion.value));
      }
    );
        view.on(view._signals.Seleccion, hoverfollower);
*/
        console.log(personas2);
    }
    function iniciarConsulta5(){
        $("#Tabpopulation").empty();
        $("#Tabpopulation").append("<div><div id=\"population-pyramid\" class=\"view\"></div></div>");
        var view = new vega.View(vega.parse(generarMapa()), {
            loader: vega.loader(),
            logLevel: vega.Warn,
            renderer: 'canvas'
        }).initialize('#population-pyramid').hover().run();
    }
    function iniciarConsulta6(){
    $("#Tabpopulation").empty();
    $("#Tabpopulation").append("<div><button type=\"button\" id=\"config\">Graficar</button><input type=\"text\" id=\"text_config\"/></div><div><div id=\"population-pyramid\" class=\"view\"></div></div>");
    $("#config").click(function(){
        console.log($("#text_config").val());
    var view = new vega.View(vega.parse(generarColumnas($("#text_config").val())), {
        loader: vega.loader(),
         logLevel: vega.Warn,
        renderer: 'canvas'
    }).initialize('#population-pyramid').hover().run();
        
    });
    console.log(personas2);
 }
</script>